#!/usr/bin/env bash

while [ ! -d /sys/devices/pci0000:00/0000:00:03.1/0000:04:00.0/0000:05:00.0/0000:06:00.0/drm/ ]
do
    sleep 1
done

echo "Existing devices:"
ls -1 /sys/devices/pci0000:00/0000:00:03.1/0000:04:00.0/0000:05:00.0/0000:06:00.0/drm/
echo ""


for CARD_TITLE in card0 card1 card2 card3
do
    CARD=/sys/devices/pci0000:00/0000:00:03.1/0000:04:00.0/0000:05:00.0/0000:06:00.0/drm/$CARD_TITLE/device/pp_od_clk_voltage
    if [ -f "$CARD" ]
    then
        echo "$CARD_TITLE Exists!"
        echo "s 0 500" > "$CARD"
        echo "s 1 2400" > "$CARD"
        echo "vo -50" > "$CARD"
        echo "c" > "$CARD"
        cat "$CARD"
    fi
done
